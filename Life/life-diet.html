<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Bigflower Franics - 生活實踐：飲食篇</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Bigflower Franics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../topic.html" rel="" target="">
 <span class="menu-text">主題探索</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../method.html" rel="" target="">
 <span class="menu-text">方法工具</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../life.html" rel="" target="">
 <span class="menu-text">生活實踐</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">關於我</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">生活實踐：飲食篇</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<ol type="1">
<li>肥胖主要受先天遺傳還是後天環境的影響?基因扮演的腳色為何?</li>
</ol>
<p>Stunkard利用丹麥的領養資料，分析450位成年領養者的體重與親生父母、養父母之間的關係。理論上，如果環境因素比較重要，被領養者的體重會與養父母較為類似；反之，如果基因因素較為重要，被領養者的體重會與親生父母較為相似。研究結果發現：被認養者與養父母的體重無關，也就是說，<strong>環境因素對於體重基本上是沒有影響的</strong>。但被認養者與親生父母的體重密切相關。又，Stunkard也曾比較同卵雙生和異卵雙生的雙胞胎在相同與不同環境下被養育成人後，彼此體重的差異與變化情況。研究發現<strong>體重有七成是由父母的基因決定，肥胖深受遺傳的影響</strong>。然而，遺傳不是造成肥胖的單一因子，更不會是近年肥胖盛行的主因。</p>
<p>＝&gt; 如果你相對比較胖，很可能是因為遺傳的原因，特別是從小就胖、沒有瘦過的人。但是，如果你相對很胖，或者是你越來越胖，那麼多出的這部分應該自己負責，也可以找出原因來改善，讓自己活得更健康！</p>
<ol start="2" type="1">
<li>除了基因之外，什麼原因導致肥胖？</li>
</ol>
<p><strong>「卡路里過多導致肥胖」是多年來盛行的主流理論</strong>。吃進過多的卡路里，是因為肥胖者過度飲食（無自制力）與缺乏運動（散漫懶惰）的人格缺陷所致。控制總熱量的攝取就可以控制體重，「少吃、多動」是減肥的不二法門。</p>
<p>隨著人類壽命的增加，為了降低心臟病等慢性病纏身的風險，<strong>「低脂、低卡」飲食開始被倡議</strong>。在降低脂肪攝取量，蛋白質攝取量也會跟著降低之下，增加碳水化合物的攝取量變成必然的趨勢。不幸的是隨著生活水準的提高，以及精緻加工食品的盛行，心臟病發生率並沒有降低，但肥胖人口的比例卻戲劇性地上升。</p>
<p>實證研究發現：<strong>肥胖與卡路里是相關關係，但不是因果關係</strong>。減少卡路里不是減肥的關鍵！首先，如果造成體重改變的是總卡路里的變化，而「一卡路里就是一卡路里」的話，吃進同樣卡路里的澱粉、脂肪、蛋白質，會造成相同的代謝反應，對健康的影響是一樣的。但是，不同食物所引發的代謝和賀爾蒙反應是不同的。肥胖的原因並非卡路里失衡，而是代謝異常、賀爾蒙異常。其次，減少卡路里之後，身體的反應是減緩代謝，持續降低總能量的消耗，體重是不會隨之持續下降的。也因此，即使當事人的意志力堅定，減肥的成效也可能有限。三者，進食並不是人的意識可以單獨控制的，與賀爾蒙變化、基礎代謝率增減都有關系。體重減少後，身體會試著調整回原本體重，減少新陳代謝、增加飢餓感，甚至過度進食，陷入了體重反反覆覆的惡性循環之中。四者，運動的確有益健康，但對減肥效果的影響甚微。</p>
<p>＝&gt; <strong>熱量不是唯一準則，只算卡路里，減肥必定失敗。</strong> 雖然「少吃、多動」對健康有益，「肥胖是卡路里過多所致」這個理論對減肥也不是全然無功，但減肥後覆胖的比例太高的確是致命的缺點。當肥胖被視為流行病，但由理論所提出來的處方，減肥成效不佳時，勢必須要一個新的理論。</p>
<ol start="3" type="1">
<li>肥胖新理論：賀爾蒙對脂肪失調導致肥胖</li>
</ol>
<p><strong>肥胖真正的原因是賀爾蒙失調，而非卡路里失衡，而調控體重與肥胖的關鍵是胰島素。我們所選擇的食物，以及進食的時機點，則是控制體重增減的兩大要素。</strong></p>
<p>有關人體新陳代謝的一切，包括體重，都是由賀爾蒙所發出的訊號來驅動。體脂肪是身體組成的重要要素之一，體脂肪的多寡不會只取決於熱量攝取或是運動多寡。<strong>造成肥胖的關鍵，不在於吃進身體的卡路里，而在於這些卡路里往何處去</strong>。</p>
<p>人體仰賴賀爾蒙來決定身體囤積多少脂肪，如同心跳和體溫一樣。體重是無法由意識控制的。是賀爾蒙決定我們何時產生飢餓（飢餓素）和飽足感（多肽YY，膽囊收縮素），何時又該提高熱量的消耗（腎上腺素）抑或是降低讓熱量的消耗（甲狀腺素）。而肥胖，是賀爾蒙失調所造成的脂肪囤積，變胖是因為體內的賀爾蒙持續發出增加體脂肪的訊號所致。這當中，<strong>掌管脂肪儲存的胰島素，是造成肥胖的關鍵， 也是體重調控的決定性因素。</strong></p>
<p><strong>當我們進食時</strong>，身體會分泌胰導素處理飯後上升的血糖濃度。胰島素是一種儲存賀爾蒙，它會幫助細胞吸收血糖，將血糖轉變成肝醣暫存於肝臟和肌肉裡，當肝臟儲滿之後，胰島素會把多餘的肝醣轉換成脂肪儲存起來。<strong>當血糖濃度慢慢降低之後</strong>，胰島素會分泌一種作用相反的調節賀爾蒙，叫升糖素。升糖素會指示身體釋放肝臟裡的肝醣，讓血糖上升維持身體與大腦的正常運作。若肝醣已經用盡，身體會使用之前儲存下來的體脂。身體在分解體脂肪時會產生酮，在沒有血糖時，脂肪是大腦絕佳的燃料。</p>
<p><strong>這是身體運作的方式</strong>。吃東西之後身體釋出胰島素，多餘的熱量儲存起來以備不時之需。若不吃東西，身體會釋出升糖素，之前儲存起來的熱量就能派上用場。這個機制正常運作時，一切都很完美。</p>
<p><strong>胰島素濃度高會造成肥胖</strong>。高濃度胰島素會阻礙脂肪燃燒。高濃度胰島素會把脂肪鎖在脂肪細胞中。又，當血液胰島素濃度增加，身體設定的基礎體重也會跟著增加。為了讓體重增加，大腦中的下視丘會發出賀爾蒙訊號，使人體飢餓並且進食。假設我們回應這個訊號的方式是降低卡路里攝取量，那麼身體的回應方是就是降低基礎代謝率，降低熱量消耗總量。結果都一樣是人會變胖。所以<strong>減肥的關鍵不在於平衡卡路里，而是控制胰島素濃度</strong>。</p>
<ol start="4" type="1">
<li>肥胖大解密，體重控制的關鍵</li>
</ol>
<p><strong>體重控制的關鍵在於控制胰島素的濃度</strong>。胰島素的多寡不受藥物控制，是受下面兩個因素的影響：</p>
<ul>
<li><strong>吃什麼：決定胰島素會增加多少、上升到什麼程度。</strong></li>
<li><strong>何時吃：決定胰島素增減變動的情況，降低刺激高濃度胰島素的持續時間。</strong></li>
</ul>
<p>換句話說，<strong>控制肥胖的利器，就是「吃低胰島素食物」和「調整進食時機，降低持續刺激高濃度胰島素產生的時間」</strong>。想要真正的減重，必須同時符合「吃什麼」與「何時吃」的要求。過去不管是哪一種節食計畫，如低卡低脂飲食、地中海飲食等一開始都是有效的，終究都會進入停滯期，然後體重開始逐步增加，最終宣告失敗。除非能讓身體重新「設定體重」，啟動另一個生理機制，直到身體達到理想體重為止。雖然肥胖是由許多原因所造成的，但萬變不離其宗，在哪一種狀況下，肥胖都是因為賀爾蒙失調，胰島素過高所致。</p>
<p><strong>在飲食習慣「吃什麼」上面，提供下面五點原則幫助減重：</strong></p>
<ul>
<li>減少人工添加的糖分
<ul>
<li>糖分沒有營養價值，會直接造成胰島素阻抗，是首要被排除的食物。</li>
</ul></li>
<li>減少精緻穀類
<ul>
<li>食用碳水化合物，盡量選擇未經加工的完整原型食物。</li>
<li>蔬菜或根莖植物是健康的碳水化合物來源，對胰島素影響較小。</li>
</ul></li>
<li>適度攝取蛋白質
<ul>
<li>不宜吃太多或太少的蛋白質，約總熱量的20~30%。</li>
<li>可多吃雞蛋、豆類。</li>
</ul></li>
<li>增加天然油脂的攝取
<ul>
<li>脂肪是最不容易刺激胰島素分泌的食物</li>
<li>橄欖油、堅果、全脂乳製品、酪梨等是好油。</li>
</ul></li>
<li>增加保護因子的攝取
<ul>
<li>多吃各種顏色的蔬菜 ，增加膳食纖維</li>
<li>醋可減少胰島素阻抗</li>
</ul></li>
</ul>
<p><strong>在進食時機「何時吃」上面，提供下面兩個作法幫助減重：</strong></p>
<ul>
<li>只有飢餓時才進食
<ul>
<li>只要進食，胰島素或多或少都會升高，身體就會接受命令儲存脂肪。</li>
<li>避免零食與點心。</li>
</ul></li>
<li>間歇性斷食
<ul>
<li>在兩次進食之間保留足夠空檔，讓胰島素有機會降低。</li>
<li>斷食可有效調整賀爾蒙失衡所造成的肥胖問題，有助於長期維持體重。</li>
</ul></li>
</ul>
<ol start="5" type="1">
<li><strong>斷食指南: Delay, Don’t Deny</strong></li>
</ol>
<p>身體在斷食期間，會減少胰島素的分泌，所以胰島素濃度會下降。此時肝臟會釋出肝醣提供熱量，特別是大腦需要的熱量。因為胰島素濃度已經降低，在肝醣用盡之後，我們能夠取用身體儲存的脂肪，將脂肪分解成燃料，製造立即滿足大腦熱量需求的酮。身體知道我們有很多體脂肪，所以代謝不會變慢。如果胰島素濃度高居不下，就沒辦法有效利用體脂肪，也不能為身體（或大腦）取得充足的燃料。</p>
<p><strong>斷食是降低胰島素最好的方法！</strong> 斷食期間胰島素濃度大幅降低，身體會打開代謝開關，啟動燃燒脂肪的超能力，進入生酮狀態。大腦超愛酮。若身體能穩定供應酮，我們會在斷食時段感到耳聰目明、精神百倍。斷食還有抗發炎、增肌、減少腹部脂肪、調整飢餓與飽足荷爾蒙、重組腸道菌群，促進細胞自嗜等功用，所以每天斷食一段時間能讓身體休息一下。</p>
<p>＝&gt; 斷食時，在限制進食的時間只喝水（咖啡、茶）；進食時，傾聽身體的聲音，不挨餓，吃對健康好且想吃的東西（如211餐盤的吃法）。不吃早餐的168可能是最容易實踐的間歇斷食法，日食一餐的OMAD則是值得嘗試的方式，若有加速減重等其他考量時，隔日斷食的ADF可納入考慮。換句話說，以OMAD為底，需要加餐食變成168，需要減餐食變成ADF，讓一星期的斷食設計安排有彈性且多樣性。讓間歇斷食變成一輩子良好健康的生活習慣。萬一減重太慢、減重停滯，可重新檢討或設計不同的斷食方式，並且耐心等待、持續執行即可，無須三心兩意。</p>
<ol start="6" type="1">
<li>什麼是「211餐盤」</li>
</ol>
<p><strong>「211飲食法」</strong>是由哈佛大學公共衛生學院所推行的健康飲食餐盤，直覺易懂、好記好執行、不需計算食物熱量的均衡飲食方式，可培養出好的飲食習慣，也不容易復胖。想要健康瘦身可以從飲食開始，<strong>每餐攝取蔬菜、全穀類、蛋白質的比例分別是2:1:1</strong>。也就是，蔬菜類佔1/2、全穀類1/4、蛋白質1/4。透過比例攝取到足夠的蔬菜量，幫助穩定血糖，對於想要長期維持健康體重的人很有助益。</p>
<p><strong>蔬菜可加速溶脂，是增健康的多元營養，為減重者的「主食」。</strong> 一餐中攝取足夠的蔬菜量，可以降低升糖指數，是穩定血糖、維持腸道功能，並且是保護細胞健康的重要關鍵。這些纖維也是腸道益生菌喜歡吃的食物，如果腸道益生菌們夠健康，他們會分泌對健康有益的物質譬如抗炎因子來緩解身體發炎；分泌血清素讓你有安定愉悅感；也會製造短鏈脂肪酸幫助腸道黏膜屏障更加豐厚，有效阻擋外來毒素，這些短鏈脂肪酸還能運輸到大腦神經組織，幫助細胞正常生長，預防大腦老化。</p>
<p><strong>彩虹蔬果觀念是全平衡飲食的真諦。</strong>可以盡量多多攝取不同種類，補足各種營養素，也比較不容易吃膩。餐盤中至少有3種顏色的彩虹蔬菜，就能吃到保護細胞的「植化素」。植化素是一群天然的植物化學色素，讓蔬果擁有鮮豔的外觀與特殊的味道，能抵抗土壤壞菌、蚊蟲、與太陽輻射的傷害，讓植物堅強生長。每天攝取各種顏色的植化素，就能提升抵禦外界侵襲的能力。當餐盤中有著色彩豐富的食物，看了也會令人開心，吃得愉悅滿足。</p>
<p><strong>又，減肥時必須節制水果類。</strong></p>
<p><strong>多攝取蛋白質食物才能避免復胖</strong>。蛋白質是增肌塑身的要素，能增加飽足感，還能調控血糖代謝及脂肪形成有關的基因。可採用豆類、魚類、雞蛋、肉類的優先順序，一天最好同時吃到「植物性與動物性蛋白質」，肉類建議以白肉如雞肉為主，紅肉如豬肉、牛肉、羊肉為輔，盡可能避免加工肉品，例如：培根、火腿、香腸。又，好的脂肪，不是只有熱量，還能減肥。</p>
<p><strong>全穀類是全平衡營養的基礎，請拒絕含糖食物的「毒害」。</strong>每天建議吃點「全穀雜糧根莖類」，如糙米、燕麥、紅薏仁、地瓜等食物。避開容易發胖的精緻澱粉，如白麵包、白麵條、白米以及餅乾、蛋糕等加工食品，就能攝取到身體所需的膳食纖維、維生素與礦物質。這有助於穩定血糖、改善代謝問題，不只對減肥有幫助，也對身體更健康！<strong>因為糖分具致命威力，啟動「致肥」基因，抑制「抗肥」基因。</strong></p>
<p><strong>吃好油，燒壞油。</strong>除了餐盤裡的食物之外，烹煮過程中的油也要特別注意，像是牛油、椰子油、豬油都最好避開，減少反式脂肪攝取；搭配橄欖油、苦茶油、酪梨油這些抗炎好油烹調，也符合了地中海型飲食原則，有助於改善慢性疾病，預防老化；也可以選擇芝麻油、花生油或是酪梨來補充好的油脂。</p>
<p>要培養健康的飲食習慣，<strong>多喝水也是必須的</strong>！戒掉含糖飲量、牛奶、乳製品，可以喝無熱量的水、咖啡、茶，不但讓身體減輕負擔，代謝也會跟著變好。<strong>益生菌、維生素和魚油也是有助減重的好朋友。</strong></p>
<p><strong>正確的食物組合，比熱量計算還重要！若能搭配進食順序：先吃蔬菜與蛋白質，後吃澱粉，並且每口20～30下細嚼慢嚥</strong>，大腦容易產生飽足感訊號，也就容易讓你減少食量，對於穩定血糖、調整體重與腸胃道健康都具有很好的幫助。</p>
<p><strong>參考資料：</strong></p>
<p><a href="https://www.books.com.tw/products/0010783671?loc=P_br_r0vq68ygz_D_2aabd0_C_1">肥胖大減密</a></p>
<p><a href="https://www.books.com.tw/products/0010924572">間歇斷食減重全指南</a></p>
<p><a href="https://www.books.com.tw/products/0010968004?loc=P_0020_001">百變211</a></p>
<p><a href="https://www.books.com.tw/products/0010822352?loc=P_br_r0vq68ygz_D_2aabd0_C_1">終生瘦用</a></p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>